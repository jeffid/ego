<!DOCTYPE html>
<html lang="zh-Hans-CN">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-COMPATIBLE" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>
  <style></style>
  <script src="../page/handlebars.js"></script>
</head>
<body>
<script id="block" type="text/x-handlebars-template">
  {{#list people}}{{firstName}} {{lastName}}{{/list}}

</script>
<script>

  var block=document.getElementById("block");
  var tpl=Handlebars.compile(block.innerHTML);

  Handlebars.registerHelper('list', function(items, options) {
    var out = "<ul>";

    for(var i=0, l=items.length; i<l; i++) {
      out = out + "<li>" + options.fn(items[i]) + "</li>";
    }

    return out + "</ul>";
  });

  block.outerHTML=tpl(
      {
        people: [
          {firstName: "Yehuda", lastName: "Katz"},
          {firstName: "Carl", lastName: "Lerche"},
          {firstName: "Alan", lastName: "<p>This is a post about &lt;p&gt; tags</p>"}
        ]
      }
  );
</script>
<!--------------------------------------------------------------------->
<script id="entry-template" type="text/x-handlebars-template">
  <div class="entry">
    <h1>{{title}}</h1>
    <div class="body">
      {{body}}
    </div>
  </div>
</script>

<!-- 两{{

  <div class="entry">
    <h1>All about &lt;p&gt; Tags</h1>
    <div class="body">
      &lt;p&gt;This is a post about &amp;lt;p&amp;gt; tags&lt;/p&gt;
    </div>
  </div>
 string
 -->
<!-- {{{不转义
  <div class="entry">
    <h1>All about &lt;p&gt; Tags</h1>
    <div class="body">
      <p>This is a post about &lt;p&gt; tags</p>
    </div>
  </div>-->

<!-- ----------------------------------------------->
<script>

  var target = document.querySelector(".target");
  var source = document.querySelector("#entry-template").innerHTML;
  var source1 = document.querySelector("#entry-template");
  var template = Handlebars.compile(source);
  var context = {
    title: "All about <p> Tags",
    body: "<p>This is a post about &lt;p&gt; tags</p>"
  };
  var html = template(context);
  //target.appendChild(html)
//  console.log(html,typeof html);
  source1.outerHTML = html;
  /*
   var source = "<p>{{lastName}}, {{firstName}}</p>";
   var template = Handlebars.compile(source);
   html=template({firstName: "Alan", lastName: "Johnson"})
   console.log(html);
   document.body.appendChild(html);*/

</script>


</body>
</html>